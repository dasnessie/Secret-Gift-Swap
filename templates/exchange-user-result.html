<!doctype html>
{% extends "base.html" %}

{% block content %}
    <h2><a href="/{{ exchangeSlug }}/">{{ exchangeName }}</a></h2>
    <dialog id="name-confirmation" aria-labelledby="dialog-title" aria-describedby="dialog-content">
        <h3 id="dialog-title">{{ _("Confirm your name") }}</h3>
        <p id="dialog-content">{{ _("Are you %(name)s and want to see who you'll be getting a gift for?", name=participantName) }}</p>
        <form method="dialog">
            <button id="yes-button">{{ _("Yes") }}</button>
            <button id="no-button">{{ _("No") }}</button>
        </form>
    </dialog>
    <div id="result-content">
        <p>{{ _('Hello %(name)s!', name=participantName) }}</p>
        <p>{{ _("You're getting a gift for %(giftee)s.", giftee="<strong>" ~ gifteeName ~ "</strong>") | safe }}</p>
    </div>
    <details id="giver-spoiler">
        <summary>{{ _("I can't stand surprises and want to know who I'm getting a gift from.") }}</summary>
        {% set spoiler_html = '<button id="spoiler-cover" type="button">' ~ _("Click to reveal name") ~ '</button>' ~
            '<span id="spoiler-content" style="display: none;">' ~ giverName ~ '</span>' %}

        {{ _("You're getting a gift from %(giver)s.") | format(giver=spoiler_html) | safe }}
    </details>
    <details id="change-name">
        <summary>{{ _("My name is not correct, I need to change it.") }}</summary>
        {{ _("Your current name is %(participantName)s.", participantName=participantName) }}
        {{ _("If that is not correct, you can change it here.") }}
        {{ _("Your old name will immediately be replaced with your new name everywhere in this exchange.") }}
        {{ _("Please use a name that the other participants of this exchange know you as, if possible.") }}
        {{ _("Links containing your old name will continue to work, and will automatically be redirected.") }}
        <form id="rename_participant" method="post" action="">
            <label for="participant_name">{{ _('Change you name to:') }}</label>
            <input type="text" id="participant_name" name="participant_name" autofocus="True" required>
            <input type="submit" value="OK" aria-label="{{ _('Change name') }}">
        </form>
    </details>
    <script>
        const oldname="{{ participantName }}";
        const exchangeslug="{{ exchangeSlug }}"
    </script>
    <script src="/static/exchange-user-result.js"></script>
{% endblock %}